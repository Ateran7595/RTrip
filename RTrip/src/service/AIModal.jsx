import { GoogleGenerativeAI } from "@google/generative-ai";

  const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_AI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-2.0-flash-exp",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  
  
    export const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "Generate a random travel plan based on the following preferences:\n\nDestination Type: {travelPreference}\nBudget: {budget}\nActivities: {activity}\nClimate Preference: {climate}\nTravel Companions: {companion}\nTravel Plan Details:\nSuggested Destination\n\nName of the destination\nCountry & city details\nA short description explaining why it fits the preferences\nGeographic coordinates (latitude, longitude)\nItinerary (Day-by-Day Plan)\n\nEach day should include:\nplaceName: The name of the attraction/landmark\nplaceDetails: A brief description of the place and why itâ€™s worth visiting\nplaceImageURL: A direct image link for the attraction\nHotel Options\n\nAt least 3 hotel recommendations, each with:\nHotel Name\nStar Rating (e.g., 3-star, 4-star, 5-star)\nPrice Range (low, mid-range, luxury)\nDescription (briefly highlighting unique features)\nGeo Coordinates (latitude, longitude)\nGuest Rating (out of 5)\nInteresting & Unique Facts\n\nProvide at least three surprising or little-known facts about the destination.\nCan be about local culture, history, hidden gems, or fun trivia.\nGeneral Travel Tips\n\nAdvice based on the location, such as safety, best time to visit, cultural etiquette, or must-try foods.\nEstimated Cost Summary\n\nA rough estimate of the overall cost based on the budget level.\nPlease format the response in valid JSON format."},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "```json\n{\n  \"travelPlanDetails\": {\n    \"suggestedDestination\": {\n      \"name\": \"Kyoto, Japan\",\n      \"countryCityDetails\": \"Japan, Kyoto\",\n      \"description\": \"Kyoto perfectly blends ancient traditions with modern life, offering a unique cultural experience. It fits a 'Cultural Exploration' preference with numerous historical sites and gardens. The climate is temperate, with distinct seasons, suitable for someone who enjoys varied weather. The activities focus on sightseeing and cultural experiences, great for a 'Solo' traveler who is able to immerse themselves in the environment. It suits a mid-range budget.\",\n      \"geographicCoordinates\": {\n        \"latitude\": 35.0116,\n        \"longitude\": 135.7681\n      },\n       \"itinerary\": [\n        {\n          \"day\": 1,\n          \"placeName\": \"Fushimi Inari Shrine\",\n          \"placeDetails\": \"Famous for its thousands of vibrant red torii gates winding up a mountainside. A must-visit for a glimpse into Japanese Shinto traditions and breathtaking views. The hike is moderate and offers great photo opportunities.\",\n          \"placeImageURL\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/9/9a/Fushimi_Inari_Taisha_Gates_Kyoto_Japan.jpg/1280px-Fushimi_Inari_Taisha_Gates_Kyoto_Japan.jpg\"\n        },\n         {\n          \"day\": 2,\n          \"placeName\": \"Kinkaku-ji (Golden Pavilion)\",\n           \"placeDetails\": \"A Zen Buddhist temple covered in gold leaf. The reflection of the pavilion in the surrounding pond is a sight to behold. It's an iconic symbol of Kyoto and Japanese architecture.\",\n          \"placeImageURL\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a9/Kinkaku-ji_Kyoto_Japan.jpg/1280px-Kinkaku-ji_Kyoto_Japan.jpg\"\n        },\n        {\n          \"day\": 3,\n          \"placeName\": \"Arashiyama Bamboo Grove\",\n           \"placeDetails\": \"A magical walk through towering bamboo stalks. Experience the serenity of this natural wonder. The area also offers the Tenryu-ji Temple and Togetsukyo Bridge.\",\n          \"placeImageURL\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a4/Arashiyama_Bamboo_Grove%2C_Kyoto.jpg/1280px-Arashiyama_Bamboo_Grove%2C_Kyoto.jpg\"\n        },\n         {\n          \"day\": 4,\n            \"placeName\": \"Gion District\",\n            \"placeDetails\": \"Explore the traditional geisha district. See preserved wooden machiya houses and maybe catch a glimpse of a geisha. This area also has many tea houses and shops. Consider a traditional tea ceremony.\",\n           \"placeImageURL\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/8/8a/Gion_District_Kyoto_Japan.jpg/1280px-Gion_District_Kyoto_Japan.jpg\"\n        },\n         {\n          \"day\": 5,\n            \"placeName\": \"Nishiki Market\",\n             \"placeDetails\": \"Known as \\\"Kyoto's Kitchen\\\", this lively market is a great place to sample local foods and pick up souvenirs. A feast for all the senses, there are many stalls with traditional ingredients and treats.\",\n            \"placeImageURL\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/8/84/Kyoto_Nishiki_Market.jpg/1280px-Kyoto_Nishiki_Market.jpg\"\n        }\n\n      ]\n    },\n    \"hotelOptions\": [\n       {\n        \"hotelName\": \"Hotel Granvia Kyoto\",\n        \"starRating\": \"4-star\",\n        \"priceRange\": \"mid-range\",\n         \"description\": \"Located directly above Kyoto Station, offering convenient access and stunning city views. Known for its excellent service.\",\n        \"geoCoordinates\": {\n          \"latitude\": 34.9851,\n          \"longitude\": 135.7583\n        },\n         \"guestRating\": 4.6\n      },\n      {\n        \"hotelName\": \"Kyoto Century Hotel\",\n         \"starRating\": \"4-star\",\n         \"priceRange\": \"mid-range\",\n        \"description\": \"A modern hotel with comfortable rooms and good amenities.  Located close to Kyoto Station, making it a great base for exploring the city.\",\n         \"geoCoordinates\": {\n          \"latitude\": 34.9878,\n          \"longitude\": 135.7595\n        },\n        \"guestRating\": 4.4\n      },\n       {\n        \"hotelName\": \"Ritz-Carlton, Kyoto\",\n        \"starRating\": \"5-star\",\n         \"priceRange\": \"luxury\",\n         \"description\": \"Offers a luxurious stay with a blend of traditional Japanese aesthetics and modern comfort.  Located along the Kamogawa River.\",\n        \"geoCoordinates\": {\n          \"latitude\": 35.0095,\n          \"longitude\": 135.7685\n        },\n         \"guestRating\": 4.8\n      }\n    ],\n    \"interestingUniqueFacts\": [\n      \"Kyoto was the capital of Japan for over a thousand years, from 794 to 1868.\",\n      \"The city has over 1,600 Buddhist temples and 400 Shinto shrines.\",\n      \"Geishas are highly skilled entertainers, and the term 'Geiko' is used to refer to geisha in Kyoto.\"\n    ],\n    \"generalTravelTips\": [\n      \"The best times to visit Kyoto are during spring (cherry blossoms) and autumn (vibrant foliage).\",\n      \"Learn a few basic Japanese phrases; it can greatly enhance your travel experience.\",\n      \"Carry cash; many smaller establishments may not accept credit cards.\",\n      \"Be mindful of cultural etiquette, such as removing your shoes indoors and not speaking loudly in public spaces.\"\n    ],\n     \"estimatedCostSummary\": {\n        \"costEstimate\": \"Mid-range budget required for this trip. Expect costs of approximately $150-$300 per day including accommodation, meals, and sightseeing. It may be worth budgeting for some souvenirs and specialty shopping.\"\n    }\n  }\n}\n```\n"},
          ],
        },
      ],
    });